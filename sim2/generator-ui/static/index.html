<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>sim2 Generator</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="backdrop"></div>
  <header class="hero">
    <div class="hero-text">
      <div class="hero-title">
        <p class="eyebrow">sim2</p>
        <h1 class="eyebrow-title">Scenario Generator</h1>
      </div>
    </div>
    <div class="hero-meta" id="baseMeta">
      <div>
        <span class="label">Base</span>
        <span class="value" id="baseName">-</span>
      </div>
      <div>
        <span class="label">World Size</span>
        <span class="value" id="worldSize">-</span>
      </div>
      <div>
        <span class="label">Extent</span>
        <span class="value" id="worldExtent">-</span>
      </div>
    </div>
  </header>

  <main class="grid">
    <section class="panel controls">
      <h2>Generator Spec</h2>
      <div class="form-row" data-help="Choose the base run JSON that provides world size and directives.">
        <label for="baseSelect">Base run file</label>
        <select id="baseSelect"></select>
      </div>

      <div class="split">
        <div class="form-row" data-help="Random seed for the generator; same seed repeats the layout.">
          <label for="seed">Seed</label>
          <input id="seed" type="number" value="100" />
        </div>
        <div class="form-row" data-help="Filename used when saving the generated JSON.">
          <label for="outputName">Output name</label>
          <input id="outputName" type="text" value="sim100.json" />
        </div>
      </div>

      <div class="split">
        <div class="form-row" data-help="Number of positrinos to place.">
          <label for="countP">Positrinos</label>
          <input id="countP" type="number" min="0" value="50" />
        </div>
        <div class="form-row" data-help="Number of electrinos to place.">
          <label for="countE">Electrinos</label>
          <input id="countE" type="number" min="0" value="50" />
        </div>
      </div>

      <div class="form-block">
        <h3>Position</h3>
        <div class="form-row" data-help="Pick how particle positions are distributed; extra controls appear below.">
          <label for="posType">Distribution</label>
          <select id="posType">
            <option value="uniform_square">Uniform square</option>
            <option value="ring">Ring</option>
            <option value="annulus">Annulus</option>
            <option value="gaussian">Gaussian</option>
            <option value="clusters">Clusters</option>
            <option value="spiral">Spiral</option>
          </select>
        </div>

        <div class="option-group" data-pos="uniform_square">
          <div class="form-row" data-help="Clamp positions inside this radius; leave blank for auto.">
            <label for="posMaxRadius">Max radius</label>
            <input id="posMaxRadius" type="number" step="0.01" placeholder="auto" />
          </div>
        </div>

        <div class="option-group" data-pos="ring">
          <div class="split">
            <div class="form-row" data-help="Center radius of the ring.">
              <label for="ringRadius">Ring radius</label>
              <input id="ringRadius" type="number" step="0.01" value="1.2" />
            </div>
            <div class="form-row" data-help="Thickness of the ring band.">
              <label for="ringThickness">Ring thickness</label>
              <input id="ringThickness" type="number" step="0.01" value="0.2" />
            </div>
          </div>
        </div>

        <div class="option-group" data-pos="annulus">
          <div class="split">
            <div class="form-row" data-help="Inner radius of the annulus.">
              <label for="annulusInner">Inner radius</label>
              <input id="annulusInner" type="number" step="0.01" value="0.6" />
            </div>
            <div class="form-row" data-help="Outer radius of the annulus.">
              <label for="annulusOuter">Outer radius</label>
              <input id="annulusOuter" type="number" step="0.01" value="1.6" />
            </div>
          </div>
        </div>

        <div class="option-group" data-pos="gaussian">
          <div class="form-row" data-help="Standard deviation for the Gaussian position spread.">
            <label for="gaussianStd">Std dev</label>
            <input id="gaussianStd" type="number" step="0.01" value="0.6" />
          </div>
        </div>

        <div class="option-group" data-pos="clusters">
          <div class="split">
            <div class="form-row" data-help="Number of clusters to generate.">
              <label for="clusterCount">Clusters</label>
              <input id="clusterCount" type="number" min="1" value="3" />
            </div>
            <div class="form-row" data-help="Spread of points inside each cluster.">
              <label for="clusterSpread">Cluster spread</label>
              <input id="clusterSpread" type="number" step="0.01" value="0.2" />
            </div>
          </div>
          <div class="form-row" data-help="How far clusters sit from the origin.">
            <label for="clusterRadius">Cluster radius</label>
            <input id="clusterRadius" type="number" step="0.01" value="1.4" />
          </div>
        </div>

        <div class="option-group" data-pos="spiral">
          <div class="split">
            <div class="form-row" data-help="Number of spiral turns.">
              <label for="spiralTurns">Turns</label>
              <input id="spiralTurns" type="number" step="0.1" value="3" />
            </div>
            <div class="form-row" data-help="Overall spiral radius.">
              <label for="spiralRadius">Spiral radius</label>
              <input id="spiralRadius" type="number" step="0.01" value="1.6" />
            </div>
          </div>
          <div class="form-row" data-help="Random offset around the spiral path.">
            <label for="spiralJitter">Spiral jitter</label>
            <input id="spiralJitter" type="number" step="0.01" value="0.1" />
          </div>
        </div>
      </div>

      <div class="form-block">
        <h3>Velocity</h3>
        <div class="form-row" data-help="Pick how particle speeds are sampled; controls below adjust ranges.">
          <label for="velType">Distribution</label>
          <select id="velType">
            <option value="uniform">Uniform</option>
            <option value="log_uniform">Log-uniform</option>
            <option value="normal">Normal</option>
          </select>
        </div>
        <div class="option-group" data-vel="uniform log_uniform">
          <div class="split">
            <div class="form-row" data-help="Minimum speed for uniform or log-uniform.">
              <label for="velMin">Min speed</label>
              <input id="velMin" type="number" step="0.01" value="0.01" />
            </div>
            <div class="form-row" data-help="Maximum speed for uniform or log-uniform.">
              <label for="velMax">Max speed</label>
              <input id="velMax" type="number" step="0.01" value="0.2" />
            </div>
          </div>
        </div>
        <div class="option-group" data-vel="normal">
          <div class="split">
            <div class="form-row" data-help="Mean speed for normal distribution.">
              <label for="velMean">Mean</label>
              <input id="velMean" type="number" step="0.01" value="0.1" />
            </div>
            <div class="form-row" data-help="Standard deviation for normal speeds.">
              <label for="velStd">Std dev</label>
              <input id="velStd" type="number" step="0.01" value="0.03" />
            </div>
          </div>
        </div>
      </div>

      <div class="form-block">
        <h3>Heading</h3>
        <div class="form-row" data-help="Pick how headings are oriented relative to the origin.">
          <label for="headingMode">Direction</label>
          <select id="headingMode">
            <option value="toward_origin">Toward origin</option>
            <option value="away_origin">Away from origin</option>
            <option value="random">Random</option>
            <option value="tangent_cw">Tangent CW</option>
            <option value="tangent_ccw">Tangent CCW</option>
          </select>
        </div>
      </div>

      <div class="form-block">
        <h3>Constraints</h3>
        <div class="split">
          <div class="form-row" data-help="Reject placements closer than this distance.">
            <label for="minSep">Min separation</label>
            <input id="minSep" type="number" step="0.01" value="0" />
          </div>
          <div class="form-row" data-help="Keep particles outside this radius.">
            <label for="excludeRadius">Exclude radius</label>
            <input id="excludeRadius" type="number" step="0.01" value="0" />
          </div>
        </div>
      </div>

      <div class="form-block">
        <h3>Template</h3>
        <div class="form-row" data-help="Pick the mover engine; analytic uses a named path instead of physics.">
          <label for="moverType">Mover</label>
          <select id="moverType">
            <option value="physics">Physics</option>
            <option value="analytic">Analytic</option>
          </select>
        </div>
        <div class="form-row" data-help="Name of the analytic path; required when mover is analytic.">
          <label for="pathName">Path (analytic only)</label>
          <input id="pathName" type="text" placeholder="unit_circle" />
        </div>
      </div>

      <p class="status" id="status">Ready.</p>
    </section>

    <section class="panel preview">
      <div class="panel-head">
        <h2>Preview</h2>
        <div class="legend">
          <span class="tag p">Positrino</span>
          <span class="tag e">Electrino</span>
        </div>
      </div>
      <canvas id="previewCanvas" width="640" height="640"></canvas>
      <div class="action-row">
        <button id="generateBtn" class="primary" type="button" onclick="generatePreview()">Generate Preview</button>
        <button id="saveBtn" type="button">Save JSON</button>
      </div>
      <div class="action-row">
        <button id="downloadBtn" type="button">Download JSON</button>
        <button id="copySpecBtn" type="button">Copy Spec</button>
        <button id="copyJsonBtn" type="button">Copy JSON</button>
      </div>
    </section>

    <section class="panel output">
      <h2>Generated Output</h2>
      <div class="form-row">
        <label for="specOutput">Spec JSON</label>
        <textarea id="specOutput" rows="10" readonly></textarea>
      </div>
      <div class="form-row">
        <label for="jsonOutput">Run JSON</label>
        <textarea id="jsonOutput" rows="14" readonly></textarea>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
