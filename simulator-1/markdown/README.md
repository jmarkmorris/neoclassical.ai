#NEOCLASSICAL PHYSICS AND QUANTUM GRAVITY (NPQG)

Imagine that nature emerges from two flavors of immutable point potentials, the electrino and the positrino, which are equal yet opposite. Point potentials continuosly emit spherically expanding potential waves. These are the only carriers of energy, in electromagnetic and kinetic form. The are located in an infinite 3D Euclidean space. Point potential characteristics include immutability, meaning they cannot be created nor destroyed. 

NPQG explores this recipe for nature and how it emerges as a narrative and theory that is compatible with GR, QM, modified ΛCDM, yet superior in ability to explain the universe and resolve open problems.

NPQG blog and detailed information is available at https://jmarkmorris.com/ or https://neoclassical.ai/
For NPQG basics see: Idealized Neoclassical Model, the NPQG Glosssary, and the New Physics in Pictures posts.

# NPQG Simulator and Visualizer

A simulator and visualizer for point potentials in 3D space following provided action laws, which may be physics based or geometry based. This project uses Python with Manim to create animations of particle interactions based on configurable action models.

## Overview

The NPQG Simulator is designed to simulate the movement of point potentials (particles) in 3D space according to physics defined by action functions. The simulation results are then visualized using Manim to create engaging animations of the particle interactions.

### Key Features

* Discrete time simulation with configurable action functions
* 3D visualization with Manim
* Two point potential particle types with opposite potential polarity
* Path history tracers for particles
* Dynamic scaling to keep particles in view
* Pluggable action functions for different physics and geometry models
* Multiple action functions including:
  * Basic Coulomb's law-based physics
  * Path history-based physics with finite potential wave propagation
  * Logarithmic spiral geometric model
* Comprehensive configuration system with sensible defaults

## Requirements

* Python 3.7+
* NumPy
* Manim (for visualization)

## Installation

1. Install the required packages:

   ```bash
   pip install -r requirements.txt
   ```

2. Ensure Manim dependencies are installed (see [Manim installation guide](https://docs.manim.community/en/stable/installation.html))

## Project Structure

### Core Files

* `simulator.py`: Core simulation engine implementing physics calculations
* `visualizer.py`: 3D visualization of simulation results using Manim
* `run_animation.py`: Utility script to run both simulation and visualization

### Directory Structure

* `action_functions/`: Contains all action function implementations
  * `action_basic.py`: Default physics model using Coulomb's law
  * `action_history.py`: Physics model with finite potential wave propagation
  * `action_spiral.py`: Geometric model using logarithmic spirals
* `sim_config/`: Contains all simulation configuration files
  * `example_config.json`: Example configuration file with all available options
  * `sim2.json`: Simple two-particle simulation
  * `sim2spiral.json`: Two-particle simulation using spiral motion
  * `sim30.json`: Complex simulation with 30 particles
  * `sim_history.json`: Simulation using path history action
* `simulation_results/`: Output directory for simulation results
* `markdown/`: Documentation files
* `media/`: Media files generated by Manim visualizations
* `tests/`: Contains test data and scripts
  * `test_data/`: Test simulation result files

Custom action functions can be added to the `action_functions` directory as `action_yourmodel.py` files.

## Usage

### Basic Usage

Run a simulation and visualization with the default configuration:

```bash
python run_animation.py
```

Run with a specific configuration file:

```bash
python run_animation.py --config sim2.json        # Basic two-particle simulation
python run_animation.py --config sim30.json       # Complex 30-particle simulation
python run_animation.py --config sim_history.json # Simulation with finite wave propagation
python run_animation.py --config sim2spiral.json  # Geometric spiral motion simulation
```

To visualize previously generated simulation results:

```bash
python run_animation.py --config sim2spiral.json --output spiral_results.json --visualize-only
```

### Command Line Options

```bash
python run_animation.py --help
```

Options include:

| Option | Description |
|--------|-------------|
| `--config`, `-c` | Path to configuration file (default: sim30.json) |
| `--output`, `-o` | Path to save simulation results (default: simulation_results.json) |
| `--simulate-only` | Run simulation only, without visualization |
| `--visualize-only` | Run visualization only, using existing results file |
| `--quality`, `-q` | Quality setting for visualization (l=low, m=medium, h=high, k=4K) |
| `--no-preview` | Don't open preview window after rendering |
| `--no-fail` | Continue even if a step fails |

### Simulation Only

To run just the simulation:

```bash
python simulator.py my_config.json output_file.json
```

### Visualization Only

To visualize existing simulation results:

```bash
python run_animation.py --config sim2spiral.json --output spiral_results.json --visualize-only
```

## Creating Custom Configurations

Create a JSON file with your desired settings. See the `example_config.json` for a complete example with all available options.

The minimum required configuration is a list of particles with their initial properties:

```json
{
  "simulation": {
    "particles": [
      {
        "id": 1,
        "charge": 1,
        "position": [1.0, 0.0, 0.0],
        "velocity": [0.0, 0.1, 0.0]
      },
      {
        "id": 2,
        "charge": -1,
        "position": [-1.0, 0.0, 0.0],
        "velocity": [0.0, -0.1, 0.0]
      }
    ]
  }
}
```

All other parameters will use their default values when not specified.

## Action Functions

Action functions define how particles interact and move. The system is designed to support multiple action functions, allowing for different physics models:

1. Create a new Python file named `action_yourmodel.py` in the `action_functions` directory
2. Implement a class named `ActionYourmodel` (with capitalized name)
3. The class must have:
   * An `__init__` method that accepts a configuration parameter
   * An `apply` method that accepts a list of particles and a time step

See `action_functions/action_basic.py` for an example implementation.

To use a custom action function, specify it in the configuration:

```json
{
  "simulation": {
    "action_function": "yourmodel"
  }
}
```

## Configuration System

The simulator uses a robust configuration system with sensible defaults for all parameters. You only need to specify the parameters you want to customize in your JSON configuration file. The system will automatically merge your configuration with the default values.

See `example_config.json` for a complete example with all available options.

## Configuration Parameters

All configuration parameters are included in the `example_config.json` file with their default values, ensuring consistent behavior across different simulation configurations.

### Simulation Parameters

| Parameter | Description | Default |
|-----------|-------------|---------|
| `simulation.particles` | List of particles with their initial properties | `[]` |
| `simulation.duration` | Duration of the simulation in time units | `10.0` |
| `simulation.dt` | Time step size for the simulation | `0.01` |
| `simulation.max_history` | Maximum number of history points to store | `10000` |
| `simulation.action_function` | Action function to use | `"basic"` |

#### Particle Properties

| Property | Description |
|----------|-------------|
| `id` | Unique identifier for the particle |
| `charge` | Charge value (positive or negative) |
| `position` | Initial 3D position `[x, y, z]` |
| `velocity` | Initial 3D velocity `[dx/dt, dy/dt, dz/dt]` |

### Physics Parameters

| Parameter | Description | Default |
|-----------|-------------|---------|
| `physics.coulomb_constant` | Constant for Coulomb's law calculations | `0.8` |
| `physics.min_distance` | Minimum distance between particles | `0.001` |
| `physics.min_velocity` | Minimum velocity magnitude | `0.001` |
| `physics.large_force_threshold` | Threshold for force warnings | `10.0` |
| `physics.potential_velocity` | Speed of potential wave propagation | `10.0` |
| `physics.spiral_k` | Growth factor for spiral action | `0.1` |
| `physics.theta_rate` | Controls spiral movement speed | `200` |
| `physics.z_factor` | Controls z-dimension movement | `0.05` |
| `physics.initial_theta` | Starting theta value for spirals | `0.0` |

### Visualization Parameters

| Parameter | Description | Default |
|-----------|-------------|---------|
| `visualization.marker_size` | Size of particle markers | `0.04` |
| `visualization.use_dot3d` | Whether to use Dot3D instead of Sphere | `true` |
| `visualization.sim_to_manim_ratio` | Ratio of simulation steps to frames | `5` |
| `visualization.manim_frame_rate` | Frame rate for animation | `60` |

#### Camera Configuration

| Parameter | Description | Default |
|-----------|-------------|---------|
| `visualization.camera.phi` | Phi angle for camera orientation | `75` |
| `visualization.camera.theta` | Theta angle for camera orientation | `30` |

For complete configuration details, refer to `example_config.json`.

## Physics Models

### Basic Action (Default)

The default physics model uses a modified Coulomb's law with the following features:

* Opposite charges attract, like charges repel
* Forces are inversely proportional to the square of distance multiplied by particle velocity
* Minimum distance and velocity thresholds prevent extreme forces
* Support for multiple particles interacting simultaneously

### Path History Action

The path history model extends the basic physics by accounting for finite propagation speeds:

* Potential waves from each particle propagate at a configurable velocity
* Forces on particles are based on historical emitter positions
* The algorithm searches through particle history to find the position whose wave front is currently reaching the receiving particle
* Allows for more realistic modeling of wave-like interactions

### Logarithmic Spiral Action

The spiral model is purely geometric rather than physics-based:

* Particles follow predefined logarithmic spiral paths (r = a*e^(k*θ))
* Positive charges spiral outward, negative charges spiral inward
* Movement speed is controlled by the theta_rate parameter
* Creates aesthetically pleasing spiral patterns in 3D space

## Visualization

The visualization uses Manim's 3D capabilities:

* Point potentials are shown as colored dots or spheres (red for positive, blue for negative)
* Path tracers show the history of each particle's movement
* Dynamic scaling adjusts the view to keep all particles visible
* Camera angles can be configured
* Option to add "dot tracers" showing particle positions at regular intervals

## Examples

### Simple Two-Particle System (Basic Action)

```json
{
  "simulation": {
    "particles": [
      {
        "id": 1,
        "charge": 1,
        "position": [2.0, 0.0, 0.0],
        "velocity": [0.0, 0.5, 0.0]
      },
      {
        "id": 2,
        "charge": -1,
        "position": [-2.0, 0.0, 0.0],
        "velocity": [0.0, -0.5, 0.0]
      }
    ],
    "duration": 60,
    "action_function": "basic"
  }
}
```

### Path History Action System

```json
{
  "simulation": {
    "particles": [
      {
        "id": 1,
        "charge": 1,
        "position": [6.0, 0.0, 0.0],
        "velocity": [0.0, -0.2, 0.0]
      },
      {
        "id": 2,
        "charge": -1,
        "position": [-6.0, 0.0, 0.0],
        "velocity": [0.0, 0.2, 0.0]
      }
    ],
    "duration": 120,
    "action_function": "history"
  },
  "physics": {
    "potential_velocity": 3.0
  }
}
```

### Logarithmic Spiral Motion

```json
{
  "simulation": {
    "particles": [
      {
        "id": 1,
        "charge": 1,
        "position": [5.0, 5.0, 0.0],
        "velocity": [0.0, -0.25, 0.0]
      },
      {
        "id": 2,
        "charge": -1,
        "position": [-5.0, -5.0, 0.0],
        "velocity": [0.0, 0.25, 0.0]
      }
    ],
    "duration": 120,
    "action_function": "spiral"
  },
  "physics": {
    "spiral_k": 0.1,
    "theta_rate": 200,
    "z_factor": 0.05
  }
}
```

## Development

### Adding New Action Functions

To create a new physics or geometric model:

1. Create a new file named `action_yourmodel.py` in the `action_functions` directory
2. Implement a class named `ActionYourmodel` with:
   * An `__init__` method that accepts a config parameter and extracts necessary settings
   * An `apply` method that updates particle positions and velocities
3. Your action function can be physics-based (like the basic and history models) or purely geometric (like the spiral model)
4. Add the class to the `__all__` list in `action_functions/__init__.py`
5. Create a configuration file that uses your action function by setting `"action_function": "yourmodel"` in the simulation section

### Extending the Visualization

The visualization system can be extended by:

1. Modifying `visualizer.py` to add new visual elements
2. Adding new configuration options to control visualization features
3. Creating custom Manim objects for specialized visualizations

## License

This project is available for use and modification according to the terms specified by the project owner.